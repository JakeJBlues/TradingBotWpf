<Window x:Class="TradingBotWPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="TradingBot " 
        Height="800" Width="1200"
        MinHeight="600" MinWidth="800"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <!-- Styles für bessere Optik -->
        <Style x:Key="HeaderTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Foreground" Value="#2C3E50"/>
        </Style>

        <Style x:Key="StatusTextStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Consolas"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Margin" Value="2"/>
        </Style>

        <Style x:Key="ButtonStyle" TargetType="Button">
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>

        <Style x:Key="StartButton" TargetType="Button" BasedOn="{StaticResource ButtonStyle}">
            <Setter Property="Background" Value="#27AE60"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>

        <Style x:Key="StopButton" TargetType="Button" BasedOn="{StaticResource ButtonStyle}">
            <Setter Property="Background" Value="#E74C3C"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>

        <Style x:Key="ActionButton" TargetType="Button" BasedOn="{StaticResource ButtonStyle}">
            <Setter Property="Background" Value="#3498DB"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="200"/>
        </Grid.RowDefinitions>

        <!-- Header mit Kontrollen -->
        <Border Grid.Row="0" Background="#34495E" Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="🤖 TradingBot Control Panel" 
                              FontSize="20" FontWeight="Bold" 
                              Foreground="White" 
                              VerticalAlignment="Center"/>
                    <Rectangle Width="20"/>
                    <TextBlock x:Name="StatusIndicator" 
                              Text="⚫ GESTOPPT" 
                              FontSize="14" FontWeight="Bold"
                              Foreground="#E74C3C" 
                              VerticalAlignment="Center"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button x:Name="StartButton" Content="▶ START BOT" 
                           Style="{StaticResource StartButton}"
                           Click="StartButton_Click"/>
                    <Button x:Name="StopButton" Content="⏹ STOP BOT" 
                           Style="{StaticResource StopButton}"
                           Click="StopButton_Click" IsEnabled="False"/>
                    <Button x:Name="RefreshButton" Content="🔄 REFRESH" 
                           Style="{StaticResource ActionButton}"
                           Click="RefreshButton_Click"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Hauptinhalt -->
        <TabControl Grid.Row="1" Margin="10">

            <!-- Dashboard Tab -->
            <TabItem Header="📊 Dashboard">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Budget Status -->
                    <GroupBox Grid.Column="0" Header="💰 Budget Status" Margin="5">
                        <StackPanel>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Verfügbares Budget:" Margin="5"/>
                                <TextBlock Grid.Row="0" Grid.Column="1" x:Name="AvailableBudgetText" 
                                          Text="0.00 EUR" FontWeight="Bold" Foreground="Green" Margin="5"/>

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Investiert:" Margin="5"/>
                                <TextBlock Grid.Row="1" Grid.Column="1" x:Name="InvestedAmountText" 
                                          Text="0.00 EUR" FontWeight="Bold" Foreground="Orange" Margin="5"/>

                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Realisierter Profit:" Margin="5"/>
                                <TextBlock Grid.Row="2" Grid.Column="1" x:Name="RealizedProfitText" 
                                          Text="0.00 EUR" FontWeight="Bold" Margin="5"/>

                                <TextBlock Grid.Row="3" Grid.Column="0" Text="Initial Balance:" Margin="5"/>
                                <TextBlock Grid.Row="3" Grid.Column="1" x:Name="InitialBalanceText" 
                                          Text="0.00 EUR" Margin="5"/>

                                <TextBlock Grid.Row="4" Grid.Column="0" Text="Budget-Auslastung:" Margin="5"/>
                                <ProgressBar Grid.Row="4" Grid.Column="1" x:Name="BudgetUtilizationBar" 
                                           Height="20" Margin="5" Maximum="100"/>

                                <TextBlock Grid.Row="5" Grid.Column="0" Text="Gesamt Gewinn" Margin="5"/>
                                <TextBlock Grid.Row="5" Grid.Column="1" x:Name="OverAllPLText" 
                                      Text="0.00 EUR" Margin="5"/>

                            </Grid>
                        </StackPanel>
                    </GroupBox>

                    <!-- Aktive Positionen -->
                    <GroupBox Grid.Column="1" Header="📈 Aktive Positionen" Margin="5">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <!-- Live-Preis-Status -->
                            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="5">
                                <TextBlock Text="🔄" VerticalAlignment="Center"/>
                                <TextBlock x:Name="PriceUpdateStatusText" Text="Live-Updates: Aktiv" 
                                          Foreground="Green" FontWeight="SemiBold" Margin="5,0"/>
                                <TextBlock x:Name="LastGlobalUpdateText" Text="(--:--:--)" 
                                          FontSize="9" Foreground="Gray"/>
                            </StackPanel>

                            <TextBlock Grid.Row="1" x:Name="PositionsCountText" 
                                      Text="Anzahl Positionen: 0" 
                                      Style="{StaticResource HeaderTextStyle}"/>

                            <ListView Grid.Row="2" x:Name="PositionsListView" Margin="5">
                                <ListView.View>
                                    <GridView>
                                        <GridViewColumn Header="Symbol" Width="80">
                                            <GridViewColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding Symbol}" FontWeight="Bold"/>
                                                </DataTemplate>
                                            </GridViewColumn.CellTemplate>
                                        </GridViewColumn>

                                        <GridViewColumn Header="Live-Preis" Width="120">
                                            <GridViewColumn.CellTemplate>
                                                <DataTemplate>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="{Binding PriceChangeIcon}" Margin="0,0,5,0"/>
                                                        <TextBlock Text="{Binding CurrentPriceFormatted}" 
                                                                  Foreground="{Binding PriceColor}" 
                                                                  FontWeight="SemiBold"/>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </GridViewColumn.CellTemplate>
                                        </GridViewColumn>

                                        <GridViewColumn Header="Ø-Preis" Width="80" DisplayMemberBinding="{Binding PurchasePrice, StringFormat=F6}"/>
                                        <GridViewColumn Header="Ziel" Width="80" DisplayMemberBinding="{Binding High, StringFormat=F6}"/>
                                        <GridViewColumn Header="AvgDown" Width="60" DisplayMemberBinding="{Binding AverageDownCount}"/>

                                        <GridViewColumn Header="P/L" Width="100">
                                            <GridViewColumn.CellTemplate>
                                                <DataTemplate>
                                                    <StackPanel>
                                                        <TextBlock Text="{Binding UnrealizedPLFormatted}" 
                                                                  Foreground="{Binding ProfitLossColor}" 
                                                                  FontWeight="Bold" FontSize="11"/>
                                                        <TextBlock Text="{Binding UnrealizedPLPercentFormatted}" 
                                                                  Foreground="{Binding ProfitLossColor}" 
                                                                  FontSize="9"/>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </GridViewColumn.CellTemplate>
                                        </GridViewColumn>

                                        <GridViewColumn Header="Status" Width="90">
                                            <GridViewColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding SellIndicator}" 
                                                              Foreground="{Binding SellIndicatorColor}" 
                                                              FontWeight="Bold" FontSize="10"
                                                              HorizontalAlignment="Center"/>
                                                </DataTemplate>
                                            </GridViewColumn.CellTemplate>
                                        </GridViewColumn>
                                    </GridView>
                                </ListView.View>
                            </ListView>
                        </Grid>
                    </GroupBox>
                </Grid>
            </TabItem>

            <!-- Positionen Tab -->
            <TabItem Header="📋 Positionen">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Position Controls -->
                    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="10">
                        <Button Content="🔄 Average-Down Status" 
                               Style="{StaticResource ActionButton}"
                               Click="ShowAverageDownStatus_Click"/>
                        <Button Content="📊 Average-Down Statistiken" 
                               Style="{StaticResource ActionButton}"
                               Click="ShowAverageDownStats_Click"/>
                        <Button Content="❌ Alle Average-Downs deaktivieren" 
                               Style="{StaticResource StopButton}"
                               Click="DisableAllAverageDowns_Click"/>
                    </StackPanel>

                    <!-- Detaillierte Positionen Liste -->
                    <DataGrid Grid.Row="1" x:Name="DetailedPositionsGrid" 
                             AutoGenerateColumns="False" 
                             IsReadOnly="True"
                             Margin="10"
                             GridLinesVisibility="Horizontal"
                             AlternatingRowBackground="#F5F5F5">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Symbol" Binding="{Binding Symbol}" Width="80">
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="FontWeight" Value="Bold"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>

                            <DataGridTemplateColumn Header="Live-Preis" Width="130">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding PriceChangeIcon}" 
                                                      VerticalAlignment="Center" 
                                                      Margin="0,0,5,0"/>
                                            <StackPanel>
                                                <TextBlock Text="{Binding CurrentPriceFormatted}" 
                                                          Foreground="{Binding PriceColor}" 
                                                          FontWeight="SemiBold"/>
                                                <TextBlock Text="{Binding LastUpdateFormatted}" 
                                                          FontSize="8" 
                                                          Foreground="Gray"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTextColumn Header="Ø-Preis" Binding="{Binding PurchasePrice, StringFormat=F6}" Width="80"/>
                            <DataGridTextColumn Header="Original" Binding="{Binding OriginalPurchasePrice, StringFormat=F6}" Width="80"/>
                            <DataGridTextColumn Header="Volume" Binding="{Binding Volume, StringFormat=F4}" Width="80"/>
                            <DataGridTextColumn Header="Investment" Binding="{Binding TotalInvestedAmount, StringFormat=F2}" Width="90"/>

                            <DataGridTemplateColumn Header="P/L" Width="120" CanUserSort="True">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel>
                                            <TextBlock Text="{Binding UnrealizedPLFormatted}" 
                                                      Foreground="{Binding ProfitLossColor}" 
                                                      FontWeight="Bold"/>
                                            <TextBlock Text="{Binding UnrealizedPLPercentFormatted}" 
                                                      Foreground="{Binding ProfitLossColor}"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTextColumn Header="AvgDown" Binding="{Binding AverageDownCount}" Width="60"/>
                            <DataGridTextColumn Header="Trigger" Binding="{Binding NextAverageDownTrigger, StringFormat=F6}" Width="80"/>
                            <DataGridTextColumn Header="Ziel" Binding="{Binding High, StringFormat=F6}" Width="80"/>

                            <DataGridTemplateColumn Header="Status" Width="100">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding SellIndicator}" 
                                                  Foreground="{Binding SellIndicatorColor}" 
                                                  FontWeight="Bold" FontSize="10"
                                                  HorizontalAlignment="Center"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>

                    <!-- Position Actions -->
                    <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="10">
                        <TextBox x:Name="SymbolTextBox" Width="100" 
                                Margin="5" VerticalAlignment="Center"
                                Text="BTC-EUR"/>
                        <Button Content="Average-Down deaktivieren" 
                               Style="{StaticResource StopButton}"
                               Click="DisableAverageDownForSymbol_Click"/>
                    </StackPanel>
                </Grid>
            </TabItem>

            <!-- Cooldowns & Blacklist Tab -->
            <TabItem Header="⏰ Cooldowns - Filter">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Cooldown Status -->
                    <GroupBox Grid.Column="0" Header="⏰ Aktive Cooldowns" Margin="5">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <Button Grid.Row="0" Content="🔄 Cooldowns aktualisieren" 
                                   Style="{StaticResource ActionButton}"
                                   Click="RefreshCooldowns_Click"/>

                            <ListView Grid.Row="1" x:Name="CooldownsListView" Margin="5">
                                <ListView.View>
                                    <GridView>
                                        <GridViewColumn Header="" Width="30">
                                            <GridViewColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding TypeIcon}" HorizontalAlignment="Center"/>
                                                </DataTemplate>
                                            </GridViewColumn.CellTemplate>
                                        </GridViewColumn>

                                        <GridViewColumn Header="Symbol" Width="80">
                                            <GridViewColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding Symbol}" FontWeight="SemiBold"/>
                                                </DataTemplate>
                                            </GridViewColumn.CellTemplate>
                                        </GridViewColumn>

                                        <GridViewColumn Header="Typ" Width="120">
                                            <GridViewColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding Type}" FontSize="11"/>
                                                </DataTemplate>
                                            </GridViewColumn.CellTemplate>
                                        </GridViewColumn>

                                        <GridViewColumn Header="Verbleibend" Width="100">
                                            <GridViewColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding RemainingTime}" 
                                                              FontFamily="Consolas" 
                                                              FontWeight="Bold"/>
                                                </DataTemplate>
                                            </GridViewColumn.CellTemplate>
                                        </GridViewColumn>

                                        <GridViewColumn Header="Läuft ab" Width="80">
                                            <GridViewColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding ExpiresAtFormatted}" 
                                                              FontSize="10" 
                                                              Foreground="Gray"/>
                                                </DataTemplate>
                                            </GridViewColumn.CellTemplate>
                                        </GridViewColumn>

                                        <GridViewColumn Header="Priorität" Width="70">
                                            <GridViewColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding Priority}" 
                                                              FontSize="9" 
                                                              FontWeight="Bold"
                                                              HorizontalAlignment="Center"/>
                                                </DataTemplate>
                                            </GridViewColumn.CellTemplate>
                                        </GridViewColumn>
                                    </GridView>
                                </ListView.View>
                            </ListView>
                        </Grid>
                    </GroupBox>

                    <!-- Blacklist Management -->
                    <GroupBox Grid.Column="1" Header="🚫 Blacklist Management" Margin="5">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <Button Grid.Row="0" Content="📋 Blacklist Status" 
                                   Style="{StaticResource ActionButton}"
                                   Click="ShowBlacklistStatus_Click"/>

                            <ListView Grid.Row="1" x:Name="BlacklistItemsListView" Margin="5">
                                <ListView.View>
                                    <GridView>
                                        <GridViewColumn Header="Item" Width="100" DisplayMemberBinding="{Binding Item}"/>
                                        <GridViewColumn Header="Typ" Width="80" DisplayMemberBinding="{Binding Type}"/>
                                    </GridView>
                                </ListView.View>
                            </ListView>

                            <StackPanel Grid.Row="2" Orientation="Horizontal">
                                <TextBox x:Name="BlacklistItemTextBox" Width="100" Margin="5"/>
                                <ComboBox x:Name="BlacklistTypeComboBox" Width="80" Margin="5">
                                    <ComboBoxItem Content="Asset"/>
                                    <ComboBoxItem Content="Symbol"/>
                                </ComboBox>
                                <Button Content="➕ Hinzufügen" 
                                       Style="{StaticResource ActionButton}"
                                       Click="AddToBlacklist_Click"/>
                            </StackPanel>
                        </Grid>
                    </GroupBox>
                </Grid>
            </TabItem>

            <!-- Einstellungen Tab -->
            <TabItem Header="⚙️ Einstellungen">
                <ScrollViewer>
                    <StackPanel Margin="20">

                        <!-- API Einstellungen -->
                        <GroupBox Header="🔐 API Einstellungen" Margin="10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="API Key:" Margin="5" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="0" Grid.Column="1" x:Name="ApiKeyTextBox" Margin="5"/>

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Secret:" Margin="5" VerticalAlignment="Center"/>
                                <PasswordBox Grid.Row="1" Grid.Column="1" x:Name="SecretPasswordBox" Margin="5"/>

                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Passphrase:" Margin="5" VerticalAlignment="Center"/>
                                <PasswordBox Grid.Row="2" Grid.Column="1" x:Name="PassphrasePasswordBox" Margin="5"/>
                            </Grid>
                        </GroupBox>

                        <!-- Trading Einstellungen -->
                        <GroupBox Header="📈 Trading Einstellungen" Margin="10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Kauf Cooldown (Min):" Margin="5" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="0" Grid.Column="1" x:Name="BuyCooldownTextBox" Text="10" Margin="5"/>

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Verkauf Cooldown (Min):" Margin="5" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="1" Grid.Column="1" x:Name="SellCooldownTextBox" Text="0" Margin="5"/>

                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Globaler Cooldown (Sek):" Margin="5" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="2" Grid.Column="1" x:Name="GlobalCooldownTextBox" Text="1" Margin="5"/>

                                <TextBlock Grid.Row="3" Grid.Column="0" Text="Verkaufssperre (Min):" Margin="5" VerticalAlignment="Center"/>
                                <TextBox Grid.Row="3" Grid.Column="1" x:Name="SellLockoutTextBox" Text="5" Margin="5"/>

                                <CheckBox Grid.Row="4" Grid.Column="1" x:Name="AverageDownEnabledCheckBox" 
                                         Content="Average-Down für neue Positionen aktivieren" 
                                         IsChecked="True" Margin="5"/>
                            </Grid>
                        </GroupBox>

                        <!-- Speicher Button -->
                        <Button Content="💾 Einstellungen speichern" 
                               Style="{StaticResource ActionButton}"
                               Click="SaveSettings_Click" 
                               HorizontalAlignment="Left"/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>

        <!-- Log Bereich -->
        <GroupBox Grid.Row="2" Header="📝 Live Log" Margin="10,0,10,10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <ScrollViewer Grid.Row="0" x:Name="LogScrollViewer" VerticalScrollBarVisibility="Auto">
                    <TextBox x:Name="LogTextBox" 
                            Text="🤖 TradingBot bereit zum Start..." 
                            IsReadOnly="True" 
                            Background="#F8F9FA"
                            FontFamily="Consolas" 
                            FontSize="11"
                            TextWrapping="Wrap"
                            VerticalScrollBarVisibility="Auto"/>
                </ScrollViewer>

                <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="5">
                    <Button Content="🗑️ Log löschen" 
                           Style="{StaticResource ActionButton}"
                           Click="ClearLog_Click"/>
                    <Button Content="💾 Log speichern" 
                           Style="{StaticResource ActionButton}"
                           Click="SaveLog_Click"/>
                    <CheckBox x:Name="AutoScrollCheckBox" 
                             Content="Auto-Scroll" 
                             IsChecked="True" 
                             VerticalAlignment="Center" 
                             Margin="10,0,0,0"/>
                </StackPanel>
            </Grid>
        </GroupBox>
    </Grid>
</Window>